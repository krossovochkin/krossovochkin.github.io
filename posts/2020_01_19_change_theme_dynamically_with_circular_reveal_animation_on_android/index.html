<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>Change Theme Dynamically with Circular Reveal Animation on Android</title>

  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="apple-touch-icon" href="apple-touch-icon-144-precompressed.png"/>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
  <script src="https://kit.fontawesome.com/6d5aec2882.js" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/css/style.css" />

  <link rel="me" href="https://androiddev.social/@krossovochkin" />

  
  <meta name="theme-color" content="#1e2327">

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Change Theme Dynamically with Circular Reveal Animation on Android"/>
<meta name="twitter:description" content="Introduction Dark theme on Android is on a hype at the moment. More and more apps add support for Dark theme over time allowing users to customize their phones, save battery and provide better accessibility. Though another trend which grows today is animated theme changes. First app I saw support of this was Telegram:
Source
After that in different modifications such feature started to appear in other apps, for example VK."/>
<meta name="twitter:site" content="@krossovochkin"/>

</head>

<body>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-YEWQ4T95D5"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-YEWQ4T95D5', { 'anonymize_ip': false });
}
</script>


<header>
<nav>
  <ul>
    
    <li class="menu-left"><a href="/about">About</a></li>
    
    <li class="menu-left"><a href="/">Posts</a></li>
    
    <li class="menu-left"><a href="/apps">Apps</a></li>
    
    
    <li class="menu-right"><a rel="me" href="https://t.me/krossovochkin_newsletter" target="_blank"><i class="fa-brands fa-telegram fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="https://stackoverflow.com/users/1533933/krossovochkin" target="_blank"><i class="fa-brands fa-stack-overflow fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="https://linkedin.com/in/vasyadrobushkov" target="_blank"><i class="fa-brands fa-linkedin fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="https://facebook.com/vasya.drobushkov" target="_blank"><i class="fa-brands fa-facebook fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="/index.xml" target="_blank"><i class="fa-solid fa-rss fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="https://androiddev.social/@krossovochkin" target="_blank"><i class="fa-brands fa-mastodon fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="https://github.com/krossovochkin" target="_blank"><i class="fa-brands fa-github fa-l"></i></a></li>
    
  </ul>
</nav>

</header>

<br/>


<div class="meta">

  
    <h1><span class="title">Change Theme Dynamically with Circular Reveal Animation on Android</span></h1>
  
  
    <h3>January 19, 2020</h3>
  

</div>

<main>
<p><a href="https://proandroiddev.com/change-theme-dynamically-with-circular-reveal-animation-on-android-8cd574f5f0d8"><img src="https://img.shields.io/badge/original-proandroiddev-green#badge" alt=""></a> <a href="https://proandroiddev.com/proandroiddev-digest-14-b7247f25292f"><img src="https://img.shields.io/badge/proandroiddevdigest-14-green#badge" alt=""></a></p>
<h2 id="introduction">Introduction</h2>
<p>Dark theme on Android is on a hype at the moment. More and more apps add support for Dark theme over time allowing users to customize their phones, save battery and provide better accessibility. Though another trend which grows today is animated theme changes. First app I saw support of this was Telegram:</p>
<p><img src="../../img/1_JKZ-OapISQlTMhX8Y-VmcA.gif" alt="Source"><em><a href="https://telegram.org/blog#switch-to-night-mode-faster">Source</a></em></p>
<p>After that in different modifications such feature started to appear in other apps, for example VK.
The effect is amazing. And in this article we’ll go into how to implement such functionality in your app.</p>
<blockquote>
<p><strong>Disclaimer:</strong> Android UI Toolkit currently is pretty bad, especially in dynamic styling. To implement such a feature one need to have custom views with custom theming support in the app. If your app is small, then there is no actual need for investing time into implementing your custom views. Hopefully with help of Jetpack Compose we’ll get more adequate dynamic theming and implementation of such a feature will be more straightforward. Though in this article we’ll try to get some simple solution for dynamic customization.</p>
</blockquote>
<h2 id="basics">Basics</h2>
<p>Thanks to developers of Telegram app for making code open sourced, so we can take a look at how developers implemented this feature in the <a href="https://github.com/DrKLO/Telegram/blob/1eea3ab6f7fa8ff5b90282a2bb0e919aabea7d35/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java#L3142-L3181">repository</a> (lines highlighted).
There is a lot of code, so let’s get the idea of the whole algorithm.</p>
<p>In Android 9 we have native Dark Theme support. The issue is that it is part of configuration and Android UI Toolkit doesn’t allow to change configuration dynamically and to change theme it is needed to restart all the activities in the app. That is clearly not the solution we are looking for.
Basic support for Dark Theme with app restart is fine and is better than only providing just light theme. But to provide a really good UX it seems without custom theming we’ll not be able to achieve what we want.</p>
<p>The main algorithm is the following:</p>
<ul>
<li>
<p>we have some hidden ImageView on the screen</p>
</li>
<li>
<p>on request to change theme we draw all the content of the screen on the Canvas</p>
</li>
<li>
<p>convert content of Canvas into Bitmap and put it into ImageView</p>
</li>
<li>
<p>change theme on all views</p>
</li>
<li>
<p>start circular reveal animation for our **content **of the screen (from 0 radius to full size)</p>
</li>
</ul>
<p>This will create animation when new theme reveals with animation over old theme.
Sounds hacky, though pretty working solution.</p>
<p>Also with such a technique we can implement other different effects, for example we can implement old theme to disappear with revealing new theme underneath. For such we’ll have:</p>
<ul>
<li>
<p>hidden ImageView as in previous case with setting content of screen as Bitmap into it</p>
</li>
<li>
<p>change theme on all views</p>
</li>
<li>
<p>start circular reveal animation for our **image **(from full size to 0 radius)</p>
</li>
</ul>
<p>Let’s dive into how this can be implemented</p>
<h2 id="implementation">Implementation</h2>
<h3 id="layout">Layout</h3>
<p>We’ll start from describing our test layout:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span> <span class="na">xmlns:android=</span><span class="s">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">xmlns:tools=</span><span class="s">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">android:layout_height=</span><span class="s">&#34;match_parent&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">tools:context=</span><span class="s">&#34;.MainActivity&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">tools:ignore=</span><span class="s">&#34;HardcodedText&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;ImageView</span>
</span></span><span class="line"><span class="cl">        <span class="na">android:id=</span><span class="s">&#34;@+id/imageView&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">android:layout_height=</span><span class="s">&#34;match_parent&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">android:visibility=</span><span class="s">&#34;gone&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;LinearLayout</span>
</span></span><span class="line"><span class="cl">        <span class="na">android:id=</span><span class="s">&#34;@+id/container&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">android:layout_height=</span><span class="s">&#34;match_parent&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">android:orientation=</span><span class="s">&#34;vertical&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">android:padding=</span><span class="s">&#34;16dp&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;TextView</span>
</span></span><span class="line"><span class="cl">            <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">android:layout_marginBottom=</span><span class="s">&#34;100dp&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">android:text=</span><span class="s">&#34;Hello world!&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">android:textSize=</span><span class="s">&#34;24sp&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;Button</span>
</span></span><span class="line"><span class="cl">            <span class="na">android:id=</span><span class="s">&#34;@+id/button&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">android:text=</span><span class="s">&#34;Button&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/LinearLayout&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</span></span></code></pre></div><p>Here we’ll have our hidden ImageView and container (LinearLayout containing out test TextView and Button which we’ll use in our test).</p>
<h3 id="change-theme">Change Theme</h3>
<p>Here is our code which is responsible to change theme with animation:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">private</span> <span class="k">fun</span> <span class="nf">setTheme</span><span class="p">(</span><span class="n">theme</span><span class="p">:</span> <span class="n">Theme</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">imageView</span><span class="p">.</span><span class="n">isVisible</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">w</span> <span class="p">=</span> <span class="n">container</span><span class="p">.</span><span class="n">measuredWidth</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">h</span> <span class="p">=</span> <span class="n">container</span><span class="p">.</span><span class="n">measuredHeight</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">bitmap</span> <span class="p">=</span> <span class="n">Bitmap</span><span class="p">.</span><span class="n">createBitmap</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">Bitmap</span><span class="p">.</span><span class="n">Config</span><span class="p">.</span><span class="n">ARGB_8888</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">canvas</span> <span class="p">=</span> <span class="n">Canvas</span><span class="p">(</span><span class="n">bitmap</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">container</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">imageView</span><span class="p">.</span><span class="n">setImageBitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">imageView</span><span class="p">.</span><span class="n">isVisible</span> <span class="p">=</span> <span class="k">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">finalRadius</span> <span class="p">=</span> <span class="n">hypot</span><span class="p">(</span><span class="n">w</span><span class="p">.</span><span class="n">toFloat</span><span class="p">(),</span> <span class="n">h</span><span class="p">.</span><span class="n">toFloat</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">TODO</span><span class="p">(</span><span class="s2">&#34;Change theme over all views&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">anim</span> <span class="p">=</span> <span class="n">ViewAnimationUtils</span><span class="p">.</span><span class="n">createCircularReveal</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">w</span> <span class="p">/</span> <span class="m">2</span><span class="p">,</span> <span class="n">h</span> <span class="p">/</span> <span class="m">2</span><span class="p">,</span> <span class="m">0f</span><span class="p">,</span> <span class="n">finalRadius</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">anim</span><span class="p">.</span><span class="n">duration</span> <span class="p">=</span> <span class="m">400L</span>
</span></span><span class="line"><span class="cl">    <span class="n">anim</span><span class="p">.</span><span class="n">doOnEnd</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">imageView</span><span class="p">.</span><span class="n">setImageDrawable</span><span class="p">(</span><span class="k">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">imageView</span><span class="p">.</span><span class="n">isVisible</span> <span class="p">=</span> <span class="k">false</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">anim</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Let’s look in details what we do here:</p>
<ul>
<li>
<p>first of all we make a defensive check to not start new animation when previous is still in progress</p>
</li>
<li>
<p>then we get the dimensions of the container with content to create bitmap, draw all the content into that bitmap and set that bitmap into ImageView</p>
</li>
<li>
<p>we have left TODO in the code, where we’ll need to change theme for all views. We’ll get back to that later</p>
</li>
<li>
<p>finally we start reveal animation for container, which will actually reveal our new theme</p>
</li>
</ul>
<p>Next we should somehow make our views to support dynamic theming.</p>
<h3 id="thememanager">ThemeManager</h3>
<p>We’ll create single place for managing application theme — ThemeManager, and object which describes the Theme itself.
Theme will contain different sub-Themes for each design component — TextView, Button etc.</p>
<p>For example for TextView we can create the following Theme description:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">data</span> <span class="k">class</span> <span class="nc">TextViewTheme</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ColorRes</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">textColor</span><span class="p">:</span> <span class="n">Int</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>Similarly for container (e.g. LinearLayout) we can create:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">data</span> <span class="k">class</span> <span class="nc">ViewGroupTheme</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ColorRes</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">backgroundColor</span><span class="p">:</span> <span class="n">Int</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>And the Theme itself will be enum containing different combinations mapped over some finite number of themes — for example LIGHT and DARK:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">enum</span> <span class="k">class</span> <span class="nc">Theme</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">buttonTheme</span><span class="p">:</span> <span class="n">ButtonTheme</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">textViewTheme</span><span class="p">:</span> <span class="n">TextViewTheme</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">viewGroupTheme</span><span class="p">:</span> <span class="n">ViewGroupTheme</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">DARK</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">buttonTheme</span> <span class="p">=</span> <span class="n">ButtonTheme</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">backgroundTint</span> <span class="p">=</span> <span class="n">android</span><span class="p">.</span><span class="n">R</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">holo_green_dark</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">textColor</span> <span class="p">=</span> <span class="n">android</span><span class="p">.</span><span class="n">R</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">white</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">textViewTheme</span> <span class="p">=</span> <span class="n">TextViewTheme</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">textColor</span> <span class="p">=</span> <span class="n">android</span><span class="p">.</span><span class="n">R</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">white</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">viewGroupTheme</span> <span class="p">=</span> <span class="n">ViewGroupTheme</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">backgroundColor</span> <span class="p">=</span> <span class="n">android</span><span class="p">.</span><span class="n">R</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">background_dark</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">LIGHT</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">buttonTheme</span> <span class="p">=</span> <span class="n">ButtonTheme</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">backgroundTint</span> <span class="p">=</span> <span class="n">android</span><span class="p">.</span><span class="n">R</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">holo_green_light</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">textColor</span> <span class="p">=</span> <span class="n">android</span><span class="p">.</span><span class="n">R</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">black</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">textViewTheme</span> <span class="p">=</span> <span class="n">TextViewTheme</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">textColor</span> <span class="p">=</span> <span class="n">android</span><span class="p">.</span><span class="n">R</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">black</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">viewGroupTheme</span> <span class="p">=</span> <span class="n">ViewGroupTheme</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">backgroundColor</span> <span class="p">=</span> <span class="n">android</span><span class="p">.</span><span class="n">R</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">background_light</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>And our ThemeManager will just provide single instance of current theme:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">object</span> <span class="nc">ThemeManager</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">var</span> <span class="py">theme</span> <span class="p">=</span> <span class="n">Theme</span><span class="p">.</span><span class="n">LIGHT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="custom-views">Custom Views</h3>
<p>Next we need to create our own wrappers for views to support changes of dynamic theme changing.
Let’s make our own custom TextView as example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyTextView</span>
</span></span><span class="line"><span class="cl"><span class="nd">@JvmOverloads</span>
</span></span><span class="line"><span class="cl"><span class="k">constructor</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">attrs</span><span class="p">:</span> <span class="n">AttributeSet</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">defStyleAttr</span><span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">:</span> <span class="n">AppCompatTextView</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">defStyleAttr</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">fun</span> <span class="nf">setTheme</span><span class="p">(</span><span class="n">theme</span><span class="p">:</span> <span class="n">ThemeManager</span><span class="p">.</span><span class="n">Theme</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">setTextColor</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">ContextCompat</span><span class="p">.</span><span class="n">getColor</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">context</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">theme</span><span class="p">.</span><span class="n">textViewTheme</span><span class="p">.</span><span class="n">textColor</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>We just create our view with setTheme method, where we apply all the required fields to be styled.</p>
<p>Then we replace in xml our TextView with com.MyTextView and in our TODO access that view and set theme.
Such approach would work, but the issue is that it doesn’t scale and it requires layout files changes. But there is a way to fix all the issues, let’s see how.</p>
<h3 id="dynamic-theme-changes">Dynamic theme changes</h3>
<p>Instead of explicitly setting themes on each view it would be better if views subscribed to theme changes and reactively updated by themselves.
For this we’ll add a bit more functionality into ThemeManager — we’ll add ability to add listeners. Yes, listeners in 2020 :) One can use RxJava or kotlin Flow, it actually doesn’t matter. Listeners will be enough, so, we’ll use them.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">object</span> <span class="nc">ThemeManager</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">private</span> <span class="k">val</span> <span class="py">listeners</span> <span class="p">=</span> <span class="n">mutableSetOf</span><span class="p">&lt;</span><span class="n">ThemeChangedListener</span><span class="p">&gt;()</span>
</span></span><span class="line"><span class="cl">    <span class="k">var</span> <span class="py">theme</span> <span class="p">=</span> <span class="n">Theme</span><span class="p">.</span><span class="n">LIGHT</span>
</span></span><span class="line"><span class="cl">        <span class="k">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">field</span> <span class="p">=</span> <span class="n">value</span>
</span></span><span class="line"><span class="cl">            <span class="n">listeners</span><span class="p">.</span><span class="n">forEach</span> <span class="p">{</span> <span class="n">listener</span> <span class="o">-&gt;</span> <span class="n">listener</span><span class="p">.</span><span class="n">onThemeChanged</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">    <span class="k">interface</span> <span class="nc">ThemeChangedListener</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">fun</span> <span class="nf">onThemeChanged</span><span class="p">(</span><span class="n">theme</span><span class="p">:</span> <span class="n">Theme</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">fun</span> <span class="nf">addListener</span><span class="p">(</span><span class="n">listener</span><span class="p">:</span> <span class="n">ThemeChangedListener</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">listeners</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">fun</span> <span class="nf">removeListener</span><span class="p">(</span><span class="n">listener</span><span class="p">:</span> <span class="n">ThemeChangedListener</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">listeners</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>Nothing really interesting, just added listeners, ability to add and remove them and we update listeners on each change of theme.</p>
<h3 id="views-with-reactive-theme-changes-support">Views with reactive theme changes support</h3>
<p>Using these listeners we update our MyTextView to trigger update on theme changed:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyTextView</span>
</span></span><span class="line"><span class="cl"><span class="nd">@JvmOverloads</span>
</span></span><span class="line"><span class="cl"><span class="k">constructor</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">attrs</span><span class="p">:</span> <span class="n">AttributeSet</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">defStyleAttr</span><span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">:</span> <span class="n">AppCompatTextView</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">defStyleAttr</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">ThemeManager</span><span class="p">.</span><span class="n">ThemeChangedListener</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onFinishInflate</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">super</span><span class="p">.</span><span class="n">onFinishInflate</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">ThemeManager</span><span class="p">.</span><span class="n">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onAttachedToWindow</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">super</span><span class="p">.</span><span class="n">onAttachedToWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">ThemeManager</span><span class="p">.</span><span class="n">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onDetachedFromWindow</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">super</span><span class="p">.</span><span class="n">onDetachedFromWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">ThemeManager</span><span class="p">.</span><span class="n">removeListener</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onThemeChanged</span><span class="p">(</span><span class="n">theme</span><span class="p">:</span> <span class="n">ThemeManager</span><span class="p">.</span><span class="n">Theme</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">setTextColor</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">ContextCompat</span><span class="p">.</span><span class="n">getColor</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">context</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">theme</span><span class="p">.</span><span class="n">textViewTheme</span><span class="p">.</span><span class="n">textColor</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Instead of setTheme method we now have onThemeChanged. And in different callbacks of View lifecycle we subscribe and unsubscribe from ThemeManager.</p>
<h3 id="custom-layoutinflater">Custom LayoutInflater</h3>
<p>In order to not change our layouts we can use custom layout inflater factories. The idea is that we can intercept inflating views based on the names (“TextView”, “Button”, “com.MyTextView” etc.). And we can provide our own implementations for base views. Same approach is done in AppCompat.</p>
<p>Basic implementation of the LayoutInflater.Factory2 looks like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyLayoutInflater</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="k">private</span> <span class="k">val</span> <span class="py">delegate</span><span class="p">:</span> <span class="n">AppCompatDelegate</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">:</span> <span class="n">LayoutInflater</span><span class="p">.</span><span class="n">Factory2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreateView</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">parent</span><span class="p">:</span> <span class="n">View</span><span class="p">?,</span>
</span></span><span class="line"><span class="cl">        <span class="n">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">attrs</span><span class="p">:</span> <span class="n">AttributeSet</span>
</span></span><span class="line"><span class="cl">    <span class="p">):</span> <span class="n">View</span><span class="p">?</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">when</span> <span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;TextView&#34;</span> <span class="o">-&gt;</span> <span class="n">MyTextView</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;LinearLayout&#34;</span> <span class="o">-&gt;</span> <span class="n">MyLinearLayout</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Button&#34;</span> <span class="o">-&gt;</span> <span class="n">MyButton</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">R</span><span class="p">.</span><span class="n">attr</span><span class="p">.</span><span class="n">buttonStyle</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="o">-&gt;</span> <span class="k">delegate</span><span class="p">.</span><span class="n">createView</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreateView</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">:</span> <span class="n">AttributeSet</span><span class="p">):</span> <span class="n">View</span><span class="p">?</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">onCreateView</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>We intercept in onCreateView some views which support our dynamic theme changes and other views we ask for AppCompatDelegate to create.</p>
<p>But there is one trick with setting this factory — it should be done before super.onCreate(&hellip;):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="n">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">LayoutInflaterCompat</span><span class="p">.</span><span class="n">setFactory2</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">LayoutInflater</span><span class="p">.</span><span class="n">from</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">MyLayoutInflater</span><span class="p">(</span><span class="k">delegate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">activity_main</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="finally">Finally</h3>
<p>And we’re good! Let’s look at the results <em>(sorry, for artifacts in gif, unfortunately video recorder in Android Studio didn’t want to record without them :( )</em>:</p>
<p><img src="../../img/1_npozBlc942NNDJXmr4Zhrg.gif" alt=""></p>
<p>Also if we change our setTheme method we can implement another version:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">private</span> <span class="k">fun</span> <span class="nf">setTheme</span><span class="p">(</span><span class="n">theme</span><span class="p">:</span> <span class="n">ThemeManager</span><span class="p">.</span><span class="n">Theme</span><span class="p">,</span> <span class="n">animate</span><span class="p">:</span> <span class="n">Boolean</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(!</span><span class="n">animate</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ThemeManager</span><span class="p">.</span><span class="n">theme</span> <span class="p">=</span> <span class="n">theme</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">imageView</span><span class="p">.</span><span class="n">isVisible</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">w</span> <span class="p">=</span> <span class="n">container</span><span class="p">.</span><span class="n">measuredWidth</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">h</span> <span class="p">=</span> <span class="n">container</span><span class="p">.</span><span class="n">measuredHeight</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">bitmap</span> <span class="p">=</span> <span class="n">Bitmap</span><span class="p">.</span><span class="n">createBitmap</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">Bitmap</span><span class="p">.</span><span class="n">Config</span><span class="p">.</span><span class="n">ARGB_8888</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">canvas</span> <span class="p">=</span> <span class="n">Canvas</span><span class="p">(</span><span class="n">bitmap</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">container</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">imageView</span><span class="p">.</span><span class="n">setImageBitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">imageView</span><span class="p">.</span><span class="n">isVisible</span> <span class="p">=</span> <span class="k">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">finalRadius</span> <span class="p">=</span> <span class="n">hypot</span><span class="p">(</span><span class="n">w</span><span class="p">.</span><span class="n">toFloat</span><span class="p">(),</span> <span class="n">h</span><span class="p">.</span><span class="n">toFloat</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ThemeManager</span><span class="p">.</span><span class="n">theme</span> <span class="p">=</span> <span class="n">theme</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">anim</span> <span class="p">=</span> <span class="n">ViewAnimationUtils</span><span class="p">.</span><span class="n">createCircularReveal</span><span class="p">(</span><span class="n">imageView</span><span class="p">,</span> <span class="n">w</span> <span class="p">/</span> <span class="m">2</span><span class="p">,</span> <span class="n">h</span> <span class="p">/</span> <span class="m">2</span><span class="p">,</span> <span class="n">finalRadius</span><span class="p">,</span> <span class="m">0f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">anim</span><span class="p">.</span><span class="n">duration</span> <span class="p">=</span> <span class="m">400L</span>
</span></span><span class="line"><span class="cl">    <span class="n">anim</span><span class="p">.</span><span class="n">doOnEnd</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">imageView</span><span class="p">.</span><span class="n">setImageDrawable</span><span class="p">(</span><span class="k">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">imageView</span><span class="p">.</span><span class="n">isVisible</span> <span class="p">=</span> <span class="k">false</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">anim</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><img src="../../img/1_BdwF64uCz_vNlva9BXO9Ww.gif" alt=""></p>
<p>Awesome results, it works pretty smooth and provides a good UX with not that huge effort so far.</p>
<h3 id="what-next">What next</h3>
<p>You can find code for these in this <a href="https://gist.github.com/krossovochkin/57ce2d57e23d0a598d016473c4bf4642">gist</a>.
Also if you’d like to play with this as an exercise you can change place where reveal animation starts. Currently we use center for simplicity, but you can use for example Switch (which changes theme) as a pivot.</p>
<p>One can take a look at sample project <a href="https://github.com/krossovochkin/DynamicChangeThemeSample">here</a>.
But, please, take it as inspiration and don’t copy paste as is into production.
Thank you</p>
<h2 id="conclusion">Conclusion</h2>
<p>I hope you found this article useful and maybe some ideas will help you to implement new cool features in your apps.
Don’t forget to try new things, read code written by others, add animations to your app for better UX.</p>
<p>Happy coding!</p>

</main>


<hr/>

<footer>
<nav>
  <ul>
    
    <li class="menu-left"><a href="/about">About</a></li>
    
    <li class="menu-left"><a href="/">Posts</a></li>
    
    <li class="menu-left"><a href="/apps">Apps</a></li>
    
    
    <li class="menu-right"><a rel="me" href="https://t.me/krossovochkin_newsletter" target="_blank"><i class="fa-brands fa-telegram fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="https://stackoverflow.com/users/1533933/krossovochkin" target="_blank"><i class="fa-brands fa-stack-overflow fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="https://linkedin.com/in/vasyadrobushkov" target="_blank"><i class="fa-brands fa-linkedin fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="https://facebook.com/vasya.drobushkov" target="_blank"><i class="fa-brands fa-facebook fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="/index.xml" target="_blank"><i class="fa-solid fa-rss fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="https://androiddev.social/@krossovochkin" target="_blank"><i class="fa-brands fa-mastodon fa-l"></i></a></li>
    
    <li class="menu-right"><a rel="me" href="https://github.com/krossovochkin" target="_blank"><i class="fa-brands fa-github fa-l"></i></a></li>
    
  </ul>
</nav>

</footer>


</body>

</html>