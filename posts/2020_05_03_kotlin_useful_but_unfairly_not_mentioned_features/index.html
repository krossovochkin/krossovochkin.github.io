<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.78.2" />

    
    
    

<title>Kotlin useful but unfairly not mentioned features • Vasya Drobushkov</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Kotlin useful but unfairly not mentioned features"/>
<meta name="twitter:description" content="Exploring some good Kotlin features which are not so widely discussed"/>

<meta property="og:title" content="Kotlin useful but unfairly not mentioned features" />
<meta property="og:description" content="Exploring some good Kotlin features which are not so widely discussed" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://krossovochkin.com/posts/2020_05_03_kotlin_useful_but_unfairly_not_mentioned_features/" />
<meta property="article:published_time" content="2020-05-03T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-05-03T00:00:00+00:00" /><meta property="og:site_name" content="Krossovochkin" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.adf8a0af011d3afb07ed907ad3295e1c99f49503bc91d395e38dc3f8dfdf4900.css" integrity="sha256-rfigrwEdOvsH7ZB60yleHJn0lQO8kdOV443D&#43;N/fSQA=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class="theme-base-0a ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://krossovochkin.com/">
        
          Vasya Drobushkov
        
        </a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="https://krossovochkin.com/../img/avatar.png" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
        
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Vasya Drobushkov</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/krossovochkin" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://facebook.com/vasya.drobushkov" rel="me"><i class="fab fa-facebook-f"></i></a>
	
	
	<a href="https://github.com/krossovochkin" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/vasyadrobushkov" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://stackoverflow.com/users/1533933/krossovochkin" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2019 - 2020 Vasya Drobushkov
  
    <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>
  
</div>



  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Kotlin useful but unfairly not mentioned features</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> May 3, 2020
    
    
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/kotlin">kotlin</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 5 min read
</div>


  </header>
  
  
  <div class="post">
    <p><img src="https://images.unsplash.com/photo-1519963759188-0e9264cd7992?ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1357&amp;q=80" alt="Source"><em><a href="https://unsplash.com/photos/5EoKAdyStik">Source</a></em></p>
<p><a href="https://proandroiddev.com/kotlin-useful-but-unfairly-not-mentioned-features-25ec41ea0a87"><img src="https://img.shields.io/badge/original-proandroiddev-green#badge" alt=""></a> <a href="https://proandroiddev.com/proandroiddev-digest-21-60de024d6337"><img src="https://img.shields.io/badge/proandroiddevdigest-21-green#badge" alt=""></a></p>
<h2 id="introduction">Introduction</h2>
<p>Many of us first learned Kotlin after Java. Learning process was fairly simple because Kotlin has many similarities when at the same time improves development experience by fighting common pain points Java developer (especially on Java 6, which is common in Android world) has to encounter every day.</p>
<p>There are a bunch of articles about cool Kotlin features like immutability, handling nullability, smart-cast, data classes, and so forth. Yes, these features are great. Having to add a bunch of nullability annotations, final keywords, override equals/hashCode methods, create additional local variables after type checks — all of this adds unnecessary work that needs to be done all the time.</p>
<p>But also there are some differences between Kotlin and Java, which are not that significant, though useful. In this article, we’ll go through a few of them.</p>
<h2 id="mutability-of-method-parameters-references">Mutability of method parameter’s references</h2>
<h3 id="java">Java</h3>
<p>In Java references of parameters of a method are mutable by default.
That means that one can “replace” object on a given reference. To make it immutable one needs to add final keyword. It is a good practice to not replace such references, because it adds complexity to the code. That means that one should consider to always add final keyword to all parameters, which is definitely not that satisfying.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {

    void foo(String <span style="color:#66d9ef">param</span>) {
        <span style="color:#66d9ef">param</span> = <span style="color:#e6db74">&#34;hello&#34;</span>;
        System.<span style="color:#66d9ef">out</span>.println(<span style="color:#66d9ef">param</span>);
    }

    void fooFinal(<span style="color:#66d9ef">final</span> String <span style="color:#66d9ef">param</span>) {
        <span style="color:#66d9ef">param</span> = <span style="color:#e6db74">&#34;hello&#34;</span>; <span style="color:#75715e">// Cannot assign a value to final variable &#39;param&#39;
</span><span style="color:#75715e"></span>    }
}
</code></pre></div><p>For example, as shown in a snippet, we get compilation error only if we add final keyword.</p>
<h3 id="kotlin">Kotlin</h3>
<p>Unlike Java, in Kotlin all the params are by default immutable. And there is no way to make them mutable. This follows general Kotlin idiom of restricting all the access unless explicitly declared (so instead of putting final one usually add open where needed). In this particular case, there is no way to make this parameter neither var nor open. And anyway there is no need for that.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {

    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">foo</span>(<span style="color:#66d9ef">param</span>: String) {
       <span style="color:#66d9ef">param</span> = <span style="color:#e6db74">&#34;hello&#34;</span> <span style="color:#75715e">// Val cannot be reassigned
</span><span style="color:#75715e"></span>    }
}
</code></pre></div><h2 id="package-private-vs-protected">Package private vs protected</h2>
<p>Kotlin and Java have different approaches to visibility access. Though they are well documented, there is at least one interesting case, which is worth mentioning. And it is about protected keyword.</p>
<h3 id="java-1">Java</h3>
<p>In Java there are four visibility modifiers: public, protected, package-private (default value, has no separate keyword), private.</p>
<p>The rules are straightforward:</p>
<ul>
<li>
<p><em>private</em> is accessible from within a class</p>
</li>
<li>
<p><em>package-private</em> is accessible as private (withing a class) plus within a package</p>
</li>
<li>
<p><em>protected</em> is accessible as package-private plus for all child classes</p>
</li>
<li>
<p><em>public</em> is accessible from everywhere</p>
</li>
</ul>
<p>Important thing here is to note that protected is accessible from the same package, not only by child classes.</p>
<p>So, if we, for example, we have a class with two methods: one protected and another package-private:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span> {

    void packagePrivateMethod() {
        System.<span style="color:#66d9ef">out</span>.println(<span style="color:#e6db74">&#34;package private method called&#34;</span>);
    }

    <span style="color:#66d9ef">protected</span> void protectedMethod() {
        System.<span style="color:#66d9ef">out</span>.println(<span style="color:#e6db74">&#34;protected method called&#34;</span>);
    }
}
</code></pre></div><p>And we had class A in the same package, then that class A will be able to access both methods from class B:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {

    void foo() {
        <span style="color:#66d9ef">final</span> B b = new B();
        b.packagePrivateMethod();
        b.protectedMethod();
    }
}
</code></pre></div><h3 id="kotlin-1">Kotlin</h3>
<p>In Kotlin there are different visibility modifiers: public (default, can be omitted), protected, internal, private.</p>
<ul>
<li>
<p><em>public</em> is accessible from everywhere</p>
</li>
<li>
<p><em>protected</em> is accessible from child classes only</p>
</li>
<li>
<p><em>internal</em> is accessible from all the module (not only package, this is effectively “public in a module”)</p>
</li>
<li>
<p><em>private</em> is accessible from within a file/class</p>
</li>
</ul>
<p>So, if we had a class similar to the previous example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">open</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span> {

    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">open</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">protectedMethod</span>() {
        println(<span style="color:#e6db74">&#34;protected method called&#34;</span>)
    }

    <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">open</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">internalMethod</span>() {
        println(<span style="color:#e6db74">&#34;internal method called&#34;</span>)
    }
}
</code></pre></div><p>Then class A, while being in the same package, would not be able to access protected method:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {

    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">foo</span>() {
        <span style="color:#66d9ef">val</span> b = B()

        b.internalMethod()
        b.protectedMethod() <span style="color:#75715e">// Cannot access &#39;protectedMethod&#39;: it is protected in &#39;B&#39;
</span><span style="color:#75715e"></span>    }
}
</code></pre></div><p>And I personally found that really useful. Package-private thing is clunky and feels somewhat outdated. Having protected to be accessible from the same package feels like encapsulation hole. Glad that Kotlin has a more strict approach for protected keyword.</p>
<p>But what if we would like to have something similar to package-private in Kotlin? In this case, we can consider putting two classes into same file with marking classes we’d like to hide as private. All the methods can remain public as class won’t be accessible from outside anyway:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C</span> : B() {

    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">fooC</span>() {
        <span style="color:#66d9ef">val</span> d = D()
        d.fooD()
    }
}

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">D</span> {

    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">fooD</span>() {
        println(<span style="color:#e6db74">&#34;fooD called&#34;</span>)
    }
}
</code></pre></div><p>One can read more on visibility modifiers in Kotlin <a href="https://kotlinlang.org/docs/reference/visibility-modifiers.html">here</a>.</p>
<h2 id="final-words">Final words</h2>
<p>And that’s it for now. Hope this was interesting and useful. Kotlin is a great language and has a lot of cool features. But we can also look around and find also something else, not that impressive at first. Maybe there are some other features in Kotlin which are not highlighted that often in articles? Some features which save you time, make solutions clearer? Feel free to add your favorite features in comments.</p>
<p>Happy coding!</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/2020_04_26_category_theory/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Category theory</span>
    </a>
    
    
    <a href="/posts/2020_05_07_raising_old_project_from_the_depth/" class="navigation-next">
      <span class="navigation-tittle">Raising old project from the depth</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-148934073-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.12.1/js/all.js" integrity="sha384-ZbbbT1gw3joYkKRqh0kWyRp32UAvdqkpbLedQJSlnI8iLQcFVxaGyrOgOJiDQTTR" crossorigin="anonymous"></script>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/bash.min.js"></script>
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/java.min.js"></script>
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/kotlin.min.js"></script>
            
        
    <script type="text/javascript">
        
        hljs.configure({languages: ["bash, java, kotlin"]});
        
        hljs.initHighlightingOnLoad();
    </script>
    



    



    </body>
</html>
